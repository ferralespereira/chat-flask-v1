{% extends 'layout.html' %}
{% block title %}Login{% endblock title %}

{% block content %}
{{ session.get('name') }}

    <div class="border border-primary border-opacity-50 rounded col-md-4 p-2">

        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }} col-md-8 offset-md-2 mt-2" align="center" role="alert" "> {{ message }} </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
 
        <form action="" method="post">
        
            <div class="form-floating col-sm-6 offset-sm-2 text-primary">
                {{ form.name(class_="form-control border-primary border-opacity-50 fs-5 fw-bolder text-primary", placeholder="") }}
                {{ form.name.label(for="name") }}
            </div>
            
            {# div info #}
            <p id="info" class="fw-bold text-info mt-3"></p>

            {# div users #}
            <div id="users" name="users" class="alert alert-info border border-info border-opacity-10 rounded p-3 mt-3">
            </div>
        
        </form>

        {# div chat #}
        {#{% if user_name %}#}

            <div class="p-3">
                <h4 id="user-name">{{user_name}}</h4>
                <h5>Chat, Room: {{ room }}</h3>
                <textarea class="form-control bg-white rounded-top rounded-0" disabled id="chat" rows="5"></textarea>
                <input id="text" class="form-control rounded-bottom rounded-0" size="80" onkeypress="sendText(event)" placeholder="Enter your message here"><br><br>
                <a href="/left">Leave this room</a>
            </div>
                
        

        {#{% else %}#}



        {#{% endif %}#}
    </div>
     {# socketIO #}
     <script type="text/javascript" src="//cdn.socket.io/4.4.1/socket.io.min.js"></script>
        
     <script type="text/javascript" src="{{ url_for('static', filename = 'js/chat.js') }}"></script>

{% endblock content %}